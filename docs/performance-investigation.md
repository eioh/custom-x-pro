# パフォーマンス調査メモ

- 体感の重さが出る操作: カラムスクロール、ボタン操作（hover/active含む）
- 主な原因候補
  - `MutationObserver` が `document.body` を `attributes: true` で監視しており、属性変化（hover状態など）でも毎回 `applyFilters` を全件実行していた。
  - `applyFilters` が毎回全カラムの全セルを再探索し、`FilterEngine`/`ColumnMediaFilter` の判定を全件にかけるため、発火頻度 × 全件再処理でCPU・描画負荷が高まっていた。
- 対応方針（順次試行）
  1. 監視対象とオプションの絞り込み（属性監視をオフ、監視ノードをカラム領域に限定）。
  2. フィルタ処理のデバウンス/スロットリングで呼び出し頻度を抑制。
  3. 差分適用（新規/更新セルだけ再判定）への切り替えで全件再走査を回避。

## 実施済み
- Step1: 監視ノードをカラム領域の親要素（見つからない場合は `document.body`）に限定し、`attributes` 監視を無効化。
